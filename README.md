# Bank Card API

API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–Ω–∫–æ–≤—Å–∫–∏–º–∏ –∫–∞—Ä—Ç–∞–º–∏ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Spring Boot, Spring Security (JWT), PostgreSQL –∏ Docker Compose.

---

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∏ —Å—Ç–µ–∫
- Java 17+
- Spring Boot (Web, Data JPA, Security)
- JWT –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏/–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- PostgreSQL –∫–∞–∫ –°–£–ë–î
- Docker + Docker Compose –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏–∏
- Liquibase –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–π –ë–î
- Lombok
- OpenAPI / Swagger UI

---

## üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞ —á–µ—Ä–µ–∑ Docker Compose
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Docker –∏ Docker Compose —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∏ –∑–∞–ø—É—â–µ–Ω—ã.
2. –í –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
```bash
docker-compose up --build
```
3. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: http://localhost:8080
4. Swagger UI –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: http://localhost:8080/swagger-ui/index.html
5. –î–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏ —É–¥–∞–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ —Å –¥–∞–Ω–Ω—ã–º–∏:

```bash
docker-compose down -v
```
## üîë –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã (API)

<h3>–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h3>

POST /api/auth/register ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Ä–æ–ª—å USER –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
```bash
{
  "username": "user1",
  "password": "password123"
}
```
POST /api/auth/login ‚Äî –ª–æ–≥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç JWT —Ç–æ–∫–µ–Ω:
```bash
{
  "token": "eyJhbGciOiJIUzI1NiIsIn..."
}
```
<h3>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç–∞–º–∏</h3>

- GET /api/cards/my ‚Äî –ø–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∫–∞—Ä—Ç—ã —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
- POST /api/cards/my ‚Äî —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∫–∞—Ä—Ç—É:
```bash
{
  "cardNumber": "1234567890123456",
  "expiry": "12/2028"
}
```
- PUT /api/cards/{cardId}/balance ‚Äî –æ–±–Ω–æ–≤–∏—Ç—å –±–∞–ª–∞–Ω—Å –∫–∞—Ä—Ç—ã:
```bash
{
  "balance": 2500.75
}
```
- DELETE /api/cards/{cardId} ‚Äî —É–¥–∞–ª–∏—Ç—å –∫–∞—Ä—Ç—É.

- GET /api/cards?page=0&size=10&cardNumber=1234&userId=5 ‚Äî –ø–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∫–∞—Ä—Ç—ã —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π (–¥–ª—è ADMIN).

<h3>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</h3>

- GET /api/users?page=0&size=10 ‚Äî –ø–æ–ª—É—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π (–¥–ª—è ADMIN).

- GET /api/users/{id} ‚Äî –ø–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ (–¥–ª—è ADMIN).

# üóÉ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î –∏ Entities
<h3>User</h3>

- id ‚Äî PK
- username ‚Äî —É–Ω–∏–∫–∞–ª—å–Ω—ã–π
- password ‚Äî —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π
- role ‚Äî USER / ADMIN
- createdAt
- @OneToMany —Å –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏ (cards)

<h3>User</h3>

- id ‚Äî PK
- user_id ‚Äî FK –∫ users.id
- cardNumber ‚Äî —É–Ω–∏–∫–∞–ª—å–Ω—ã–π 16-–∑–Ω–∞—á–Ω—ã–π –Ω–æ–º–µ—Ä
- balance ‚Äî –±–∞–ª–∞–Ω—Å –∫–∞—Ä—Ç—ã
- createdAt
- expiry ‚Äî MM/yyyy
- status ‚Äî ACTIVE/BLOCKED/EXPIRED

# üîÑ –ú–∏–≥—Ä–∞—Ü–∏–∏ (Liquibase)
–ß–µ–π–Ω–¥–∂–ª–æ–≥ 001-create-tables.yml —Å–æ–∑–¥–∞—ë—Ç —Ç–∞–±–ª–∏—Ü—ã users –∏ cards.
–ß–µ–π–Ω–¥–∂–ª–æ–≥ 002-alter-cards-add-expiry-status.yml –¥–æ–±–∞–≤–ª—è–µ—Ç –≤ —Ç–∞–±–ª–∏—Ü—É cards –ø–æ–ª–µ expiry –∏ status.
